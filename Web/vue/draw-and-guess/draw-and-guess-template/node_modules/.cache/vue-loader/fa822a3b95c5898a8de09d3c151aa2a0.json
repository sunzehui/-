{"remainingRequest":"C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\src\\views\\Game\\components\\app-stage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\src\\views\\Game\\components\\app-stage.vue","mtime":1626337881306},{"path":"C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626304816456},{"path":"C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\node_modules\\babel-loader\\lib\\index.js","mtime":1626304816351},{"path":"C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626304816456},{"path":"C:\\myfile\\project\\draw-and-guess\\draw-and-guess-template\\node_modules\\vue-loader\\lib\\index.js","mtime":1626304838090}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGUsbWFwR2V0dGVyc30gZnJvbSAndnVleCcKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOnsKICAgIC4uLm1hcFN0YXRlKFsnbGluZXMnXSksCiAgICAuLi5tYXBHZXR0ZXJzKFsnaXNHYW1lU3RhcnRlZCcsJ2lzR2FtZUhvbGRlciddKQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOeUu+W4g+mFjee9rgogICAgICAKICAgICAgLy8geyBzdHJva2U6ICcjZGY0YjI2Jywgc3Ryb2tlV2lkdGg6IDUsIHBvaW50czogWzEwMCwgMTAwLCAxMDAsIDQwMF0gfSwKICAgICAgLy8geyBzdHJva2U6ICcjZmYwMGZmJywgc3Ryb2tlV2lkdGg6IDUsIHBvaW50czogWzEwMCwgMTAwLCAzMDAsIDMwMF0gfQogICAgICBzdGFnZUNvbmZpZzogewogICAgICAgIHdpZHRoOiA4MDAsCiAgICAgICAgaGVpZ2h0OiA3MDAKICAgICAgfSwKICAgICAgLy8g57uY55S754q25oCBCiAgICAgIHBhaW50aW5nOiBmYWxzZSwKCiAgICAgIC8vIOeUu+eslAogICAgICBzdHJva2U6JyMwMDAwMDAnLAogICAgICBzdHJva2VXaWR0aDo1CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIC8vIOWwhueUu+W4g+WuveW6puiuvue9ruS4juWuueWZqOWQjOWuvQogICAgdGhpcy5zdGFnZUNvbmZpZy53aWR0aCA9IHRoaXMuJHJlZnMud3JhcHBlci4kZWwub2Zmc2V0V2lkdGgKICB9LAoKICBtZXRob2RzOiB7CiAgICAvLyDpvKDmoIfmjInkuIsKICAgIG1vdXNlZG93bkhhbmRsZXIoe2V2dDp7bGF5ZXJYLGxheWVyWX19KSB7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuaXNHYW1lU3RhcnRlZCx0aGlzLmlzR2FtZUhvbGRlcikKICAgICAgaWYoISh0aGlzLmlzR2FtZVN0YXJ0ZWQmJnRoaXMuaXNHYW1lSG9sZGVyKSl7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygn6byg5qCH5oyJ5LiL5LqGJyk7CiAgICAgIHRoaXMucGFpbnRpbmcgPSB0cnVlOwogICAgICAKICAgICAgY29uc3QgbmV3TGluZSA9IHsKICAgICAgICBzdHJva2U6dGhpcy5zdHJva2UsCiAgICAgICAgc3Ryb2tlV2lkdGg6dGhpcy5zdHJva2VXaWR0aCwKICAgICAgICBwb2ludHM6WwogICAgICAgICAgbGF5ZXJYLGxheWVyWQogICAgICAgIF0KICAgICAgfQogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2RyYXdOZXdMaW5lJyxuZXdMaW5lKQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2VuZERyYXdOZXdMaW5lJyxuZXdMaW5lKQogICAgfSwKCiAgICAvLyDpvKDmoIfmi5bliqgKICAgIG1vdXNlbW92ZUhhbmRsZXIoe2V2dDp7bGF5ZXJYLGxheWVyWX19KSB7CiAgICAgIGlmICh0aGlzLnBhaW50aW5nKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+m8oOagh+aLluWKqOS6hiwg57uY55S754q25oCBJykKICAgICAgICBjb25zdCBMID0gdGhpcy5saW5lczsKICAgICAgICBjb25zdCBsYXN0TGluZSA9IExbTC5sZW5ndGggLSAxXQogICAgICAgIGxhc3RMaW5lLnBvaW50cyA9IGxhc3RMaW5lLnBvaW50cy5jb25jYXQoW2xheWVyWCxsYXllclldKQogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlTGFzdExpbmUnLGxhc3RMaW5lKQogICAgICAgIAogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZW5kVXBkYXRlTGFzdExpbmUnLGxhc3RMaW5lKQogICAgICB9CiAgICB9LAoKICAgIC8vIOm8oOagh+mHiuaUvgogICAgbW91c2V1cEhhbmRsZXIoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfpvKDmoIfph4rmlL7kuoYnKQogICAgICB0aGlzLnBhaW50aW5nID0gZmFsc2UKICAgIH0KICB9Cn0K"},{"version":3,"sources":["app-stage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app-stage.vue","sourceRoot":"src/views/Game/components","sourcesContent":["<template>\n  <el-card ref=\"wrapper\" :body-style=\"{ padding: 0 }\">\n    <v-stage\n      :config=\"stageConfig\"\n      @mousedown=\"mousedownHandler\"\n      @mouseup=\"mouseupHandler\"\n      @mousemove=\"mousemoveHandler\"\n    >\n    <v-layer>\n      <v-line\n        v-for=\"(line, index) in lines\"\n        :key=\"index\"\n        :config=\"line\"\n      />\n  </v-layer>\n    </v-stage>\n  </el-card>\n</template>\n\n<script>\nimport {mapState,mapGetters} from 'vuex'\nexport default {\n  computed:{\n    ...mapState(['lines']),\n    ...mapGetters(['isGameStarted','isGameHolder'])\n  },\n  data() {\n    return {\n      // 画布配置\n      \n      // { stroke: '#df4b26', strokeWidth: 5, points: [100, 100, 100, 400] },\n      // { stroke: '#ff00ff', strokeWidth: 5, points: [100, 100, 300, 300] }\n      stageConfig: {\n        width: 800,\n        height: 700\n      },\n      // 绘画状态\n      painting: false,\n\n      // 画笔\n      stroke:'#000000',\n      strokeWidth:5\n    }\n  },\n\n  mounted() {\n    // 将画布宽度设置与容器同宽\n    this.stageConfig.width = this.$refs.wrapper.$el.offsetWidth\n  },\n\n  methods: {\n    // 鼠标按下\n    mousedownHandler({evt:{layerX,layerY}}) {\n      console.log(this.isGameStarted,this.isGameHolder)\n      if(!(this.isGameStarted&&this.isGameHolder)){\n        return\n      }\n        console.log('鼠标按下了');\n      this.painting = true;\n      \n      const newLine = {\n        stroke:this.stroke,\n        strokeWidth:this.strokeWidth,\n        points:[\n          layerX,layerY\n        ]\n      }\n      this.$store.commit('drawNewLine',newLine)\n      this.$store.dispatch('sendDrawNewLine',newLine)\n    },\n\n    // 鼠标拖动\n    mousemoveHandler({evt:{layerX,layerY}}) {\n      if (this.painting) {\n        console.log('鼠标拖动了, 绘画状态')\n        const L = this.lines;\n        const lastLine = L[L.length - 1]\n        lastLine.points = lastLine.points.concat([layerX,layerY])\n        this.$store.commit('updateLastLine',lastLine)\n        \n        this.$store.dispatch('sendUpdateLastLine',lastLine)\n      }\n    },\n\n    // 鼠标释放\n    mouseupHandler() {\n      console.log('鼠标释放了')\n      this.painting = false\n    }\n  }\n}\n</script>\n"]}]}